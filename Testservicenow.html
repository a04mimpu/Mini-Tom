

<!DOCTYPE html>
<html lang="sv">
<head>
  <meta charset="UTF-8">
  <title>TestServiceNow</title>
  <style>
    body { font-family: sans-serif; text-align: center; background: #f0f8ff; padding: 40px; }
    input, button { padding: 12px; font-size: 16px; width: 80%; margin: 10px auto; display: block; }
    .agent { font-size: 80px; margin-bottom: 10px; }
  </style>
</head>
<body>
  <div class="agent" id="tom-emoji">ðŸ¤–</div>
  <h1>TestServiceNow</h1>
  <p>Fyll i beskrivningen:</p>
  <input type="text" id="beskrivning" placeholder="Ex: iPhone 15, Gatan 2, mottagande chef Anna Larsson, ansvarskod 12345" />
  <button onclick="tolka()">Tolka & skicka</button>

  <script>
    function tolka() {
      const input = document.getElementById("beskrivning").value;

      // GrundlÃ¤ggande tolkning
      const produktMatch = input.match(/iphone ?15|airpods|galaxy s24/i);
      const adressMatch = input.match(/\b(?:[A-ZÃ…Ã„Ã–][a-zÃ¥Ã¤Ã¶]+ ?\d*)/g);
      const chefMatch = input.match(/chef ([A-ZÃ…Ã„Ã–][a-zÃ¥Ã¤Ã¶]+ [A-ZÃ…Ã„Ã–][a-zÃ¥Ã¤Ã¶]+)/i);

      const produkt = produktMatch ? produktMatch[0] : "";
      const adress = adressMatch && adressMatch.length > 1 ? adressMatch[1] : "";
      const chef = chefMatch ? chefMatch[1] : "";

      if (produkt && adress && chef) {
        document.getElementById("tom-emoji").innerText = "âœ…";
        const tts = new SpeechSynthesisUtterance("Jag lÃ¤gger varorna i korgen");
        tts.lang = "sv-SE";
        speechSynthesis.speak(tts);

        // Skicka vidare med info i URL
        setTimeout(() => {
          window.location.href = `varukorg.html?produkt=${encodeURIComponent(produkt)}&adress=${encodeURIComponent(adress)}&chef=${encodeURIComponent(chef)}`;
        }, 2000);
      } else {
        document.getElementById("tom-emoji").innerText = "ðŸ˜ ";
        const tts = new SpeechSynthesisUtterance("Jag fÃ¶rstÃ¥r inte. Kontrollera din beskrivning.");
        tts.lang = "sv-SE";
        speechSynthesis.speak(tts);
      }
    }
  </script>
</body>
</html>
