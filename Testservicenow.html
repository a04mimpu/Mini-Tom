<!DOCTYPE html>
<html lang="sv">
<head>
  <meta charset="UTF-8">
  <title>TestServiceNow</title>
</head>
<body>
  <h1>Beställning</h1>
  <textarea id="beskrivning" rows="4" cols="50">iPhone 15, Gatan 2, mottagande chef Anna Larsson</textarea>
  <br>
  <button onclick="tolkaOchSkicka()">Tolka & Gå vidare</button>

  <script>
    function tolkaOchSkicka() {
      const beskrivning = document.getElementById("beskrivning").value;

      const produktMatch = beskrivning.match(/iphone\s*\d+/i);
      const adressMatch = beskrivning.match(/Gatan\s*\d+/i);
      const chefMatch = beskrivning.match(/chef\s+([A-Za-zÅÄÖåäö\s]+)/i);

      const produkt = produktMatch ? produktMatch[0] : "Okänd produkt";
      const adress = adressMatch ? adressMatch[0] : "Okänd adress";
      const chef = chefMatch ? chefMatch[1].trim() : "Okänd chef";

      // Spara till localStorage
      localStorage.setItem("produkter", JSON.stringify([produkt]));
      localStorage.setItem("mottagareAdress", adress);
      localStorage.setItem("mottagareNamn", chef);

      // Gå vidare
      window.location.href = "varukorg.html";
    }
  </script>
</body>
</html>
