<!DOCTYPE html>
<html lang="sv">
<head>
  <meta charset="UTF-8">
  <title>Test ServiceNow</title>
  <style>
    body {
      font-family: sans-serif;
      background-color: #eef7ff;
      text-align: center;
      margin: 50px auto;
    }

    input, button {
      padding: 10px;
      width: 70%;
      margin: 10px auto;
      font-size: 16px;
      display: block;
    }

    .emoji {
      font-size: 64px;
      transition: transform 0.3s;
    }

    #felmeddelande {
      color: red;
      font-weight: bold;
      display: none;
    }
  </style>
</head>
<body>
  <div class="emoji" id="tomEmoji">ü§ñ</div>
  <h1>TestServiceNow</h1>

  <!-- F√∂rifyllda f√§lt -->
  <input type="text" id="produkt" value="iPhone 15">
  <input type="text" id="chef" value="Anna Larsson">
  <input type="text" id="adress" value="Gatan 2">
  
  <button onclick="tolkaOchSkicka()">Tolka & skicka</button>

  <p id="felmeddelande">üò° Men vad g√∂r du nu? Alla f√§lt m√•ste fyllas i!</p>

  <script>
    function tala(text, emoji = "ü§ñ") {
      const tom = document.getElementById("tomEmoji");
      tom.innerText = emoji;

      const r√∂st = new SpeechSynthesisUtterance(text);
      r√∂st.lang = "sv-SE";
      speechSynthesis.speak(r√∂st);
    }

    function tolkaOchSkicka() {
      const produkt = document.getElementById("produkt").value.trim();
      const chef = document.getElementById("chef").value.trim();
      const adress = document.getElementById("adress").value.trim();

      if (!produkt || !chef || !adress) {
        document.getElementById("felmeddelande").style.display = "block";
        tala("Men vad g√∂r du nu?", "üò†");
        return;
      }

      document.getElementById("felmeddelande").style.display = "none";

      // Beskrivning som Tom tolkar
      const beskrivning = `${produkt}, ${chef}, ${adress}`;

      // Tom pratar
      tala("Javisst! Jag l√§gger varorna i korgen och skickar vidare.", "üòÑ");

      // V√§nta p√• att han pratat klart innan redirect
      const v√§ntetid = 3500; // ms
      setTimeout(() => {
        const url = `varukorg.html?produkt=${encodeURIComponent(produkt)}&chef=${encodeURIComponent(chef)}&adress=${encodeURIComponent(adress)}&beskrivning=${encodeURIComponent(beskrivning)}`;
        window.location.href = url;
      }, v√§ntetid);
    }
  </script>
</body>
</html>
